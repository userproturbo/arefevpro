AREFEVPRO — описание проекта

Что это за проект
1) Что это за проект

AREFEVPRO — это персональный сайт-портфолио и медиа-платформа креативной студии, цель которой — произвести впечатление на потенциального заказчика и показать работы автора в разных форматах: проекты, фото, видео, музыка и блог.

Сайт построен так, чтобы посетитель мог:

быстро посмотреть лучшие работы,

оценить стиль и уровень,

взаимодействовать с контентом через лайки и комментарии,

при желании — зарегистрироваться и получать уведомления об ответах.

Проект ориентирован на production / digital / creative сегмент: веб-разработка, фото/видео-контент, аэросъёмка с дрона, музыка и тексты.

Основные разделы сайта
2) Основные разделы сайта

На сайте есть 5 публичных разделов:

Проекты

Раздел для публикации выполненных работ:

сайты и веб-проекты,

проекты с визуальной частью,

аэросъёмка с дрона (drone aerial footage / drone videography).

Цель: показать кейсы, уровень реализации и подход к работе.

Фото

Раздел с фотоальбомами. Внутри каждого альбома — подборка лучших фотографий (например, из путешествий). Контент отбирается вручную, чтобы сохранять единый стиль и качество сайта.
Раздел с фотоальбомами.
Внутри каждого альбома — подборка лучших фотографий (например, из путешествий).
Контент отбирается вручную, чтобы сохранять единый стиль и качество сайта.

Видео

Раздел с видеоработами, в основном:

самые эффектные кадры,

drone-видео,

cinematic/атмосферные ролики.

Цель: вызвать “вау-эффект” и усилить впечатление от портфолио.

Музыка

Раздел с аудиоконтентом:

записи старых радиоэфиров,

подкасты,

авторские треки.

Блог

Раздел со статьями и заметками, где автор пишет про:

современные технологии,

ИИ,

разработку,

путешествия,

личные наблюдения и опыт.

Посты могут содержать медиа: фото и видео.

Пользовательские функции (для посетителей)
Посетитель может просматривать весь публичный контент без регистрации.

После регистрации пользователь получает возможности:

Регистрация и авторизация

Регистрация простая:

никнейм,

логин,

пароль.

Лайки и комментарии

Зарегистрированный пользователь может:

ставить лайки,

писать комментарии,

отвечать на комментарии (ветки ответов), во всех разделах, где есть контент.

Уведомления

Если кто-то ответил пользователю на комментарий — при следующем посещении сайта он увидит уведомление.

Логика уведомлений:

иконка колокольчика показывает наличие уведомлений,

список уведомлений открывается по клику,

клик по уведомлению ведёт пользователя к месту, где ему ответили (пост/фото/комментарий).

Админка и управление контентом
3) Пользовательские функции (для посетителей)

Посетитель может просматривать весь публичный контент без регистрации.

После регистрации пользователь получает возможности:

Регистрация и авторизация

Регистрация простая:

никнейм,

логин,

пароль.

Лайки и комментарии

Зарегистрированный пользователь может:

ставить лайки,

писать комментарии,

отвечать на комментарии (ветки ответов),
во всех разделах, где есть контент.

Уведомления

Если кто-то ответил пользователю на комментарий — при следующем посещении сайта он увидит уведомление.

Логика уведомлений:

иконка колокольчика показывает наличие уведомлений,

список уведомлений открывается по клику,

клик по уведомлению ведёт пользователя к месту, где ему ответили (пост/фото/комментарий).

4) Админка и управление контентом

Контент на сайт добавляется через встроенную админ-панель.

Админка позволяет:

создавать и редактировать посты,

управлять фотоальбомами и фотографиями,

загружать медиа,

публиковать/скрывать контент,

следить за базовой статистикой посещений.

Админ-часть вынесена в отдельный роут /admin и имеет собственные страницы и API-эндпоинты.

Технологический стек
5) Технологический стек

Проект построен на современном fullstack-подходе:

Frontend

Next.js (App Router)

TypeScript

UI-компоненты в app/components

Динамические страницы через маршрутизацию App Router (app/...)

Backend (внутри Next.js)

API Routes (app/api/...)

логика авторизации, постов, лайков, комментариев, уведомлений и загрузок реализована серверными роутами

Хранение файлов

медиафайлы (фото/видео/обложки) хранятся в Yandex Cloud Object Storage

Архитектура и структура проекта
Проект использует разделение на:

публичную часть сайта,

админ-панель,

API.

Ключевые директории:

app/(sections)/[section]/page.tsx

Универсальный роут для отображения секций сайта.

app/admin/*

Админ-панель:

/admin/posts — управление постами

/admin/blog — редактор блога

/admin/photos — альбомы и загрузка фото

/admin/upload — загрузка медиа

/admin/stats — статистика

app/api/*

API-эндпоинты проекта:

Auth

/api/auth/register

/api/auth/login

/api/auth/logout

/api/me — получить текущего пользователя

Контент

/api/posts

/api/posts/[slug]

/api/albums

/api/albums/[slug]

/api/photos/...

Комментарии / лайки

/api/posts/[slug]/comments

/api/photos/[photoId]/comments

/api/comments/[id]/replies

/api/comments/[id]/like

Уведомления

/api/notifications

/api/notifications/[id]/read

Системные

/api/health

/api/visit

app/components/*

UI-компоненты проекта:

лайки (LikeButton, CommentLikeButton)

комментарии (CommentsPanel)

фото-галерея и lightbox

навигация и layout-компоненты

секции главной страницы

Инфраструктура и деплой
Проект работает в production на виртуальной машине в Yandex Cloud.

Характеристики сервера:

vCPU: 2

RAM: 4 ГБ

Disk: 20 ГБ

Файлы хранятся отдельно в Object Storage (Yandex Cloud).

Сетевая схема
домены arefev.pro и www.arefev.pro указывают на статический IP сервера

Nginx работает как reverse proxy и принимает запросы на 80/443

⚠️ Next.js слушает *:3000, но защищён UFW — лучше поправить на 127.0.0.1:3000 !!!!!

наружу Next.js напрямую не доступен

PostgreSQL закрыт и слушает только локально

127.0.0.1:5432 postgres [::1]:5432 postgres

Безопасность сервера
Проект развёрнут с базовой production-безопасностью:

SSH

отключена парольная авторизация (PasswordAuthentication no)

вход только по SSH-ключу

root-логин запрещён (PermitRootLogin no)

включён Fail2Ban (jail sshd)

Firewall

включён UFW

политика по умолчанию: deny incoming, allow outgoing

открыты только порты:

22 (SSH)

80 (HTTP)

443 (HTTPS)

HTTPS

используется Let’s Encrypt

включено авто-продление сертификатов

настроены security headers (HSTS, XFO, XCTO и т.д.)

Запуск приложения и процесс деплоя

Динамические страницы через маршрутизацию App Router (app/...)

Backend (внутри Next.js)

API Routes (app/api/...)

логика авторизации, постов, лайков, комментариев, уведомлений и загрузок реализована серверными роутами

Хранение файлов

медиафайлы (фото/видео/обложки) хранятся в Yandex Cloud Object Storage

6) Архитектура и структура проекта

Проект использует разделение на:

публичную часть сайта,

админ-панель,

API.

Ключевые директории:

app/(sections)/[section]/page.tsx

Универсальный роут для отображения секций сайта.

app/admin/*

Админ-панель:

/admin/posts — управление постами

/admin/blog — редактор блога

/admin/photos — альбомы и загрузка фото

/admin/upload — загрузка медиа

/admin/stats — статистика

app/api/*

API-эндпоинты проекта:

Auth

/api/auth/register

/api/auth/login

/api/auth/logout

/api/me — получить текущего пользователя

Контент

/api/posts

/api/posts/[slug]

/api/albums

/api/albums/[slug]

/api/photos/...

Комментарии / лайки

/api/posts/[slug]/comments

/api/photos/[photoId]/comments

/api/comments/[id]/replies

/api/comments/[id]/like

Уведомления

/api/notifications

/api/notifications/[id]/read

Системные

/api/health

/api/visit

app/components/*

UI-компоненты проекта:

лайки (LikeButton, CommentLikeButton)

комментарии (CommentsPanel)

фото-галерея и lightbox

навигация и layout-компоненты

секции главной страницы

7) Инфраструктура и деплой

Проект работает в production на виртуальной машине в Yandex Cloud.

Характеристики сервера:

vCPU: 2

RAM: 4 ГБ

Disk: 20 ГБ

Файлы хранятся отдельно в Object Storage (Yandex Cloud).

8) Сетевая схема

домены arefev.pro и www.arefev.pro указывают на статический IP сервера

Nginx работает как reverse proxy и принимает запросы на 80/443

⚠️ Next.js слушает *:3000, но защищён UFW — лучше поправить на 127.0.0.1:3000 !!!!!

наружу Next.js напрямую не доступен

PostgreSQL закрыт и слушает только локально

127.0.0.1:5432 postgres
[::1]:5432    postgres


9) Безопасность сервера

Проект развёрнут с базовой production-безопасностью:

SSH

отключена парольная авторизация (PasswordAuthentication no)

вход только по SSH-ключу

root-логин запрещён (PermitRootLogin no)

включён Fail2Ban (jail sshd)

Firewall

включён UFW

политика по умолчанию: deny incoming, allow outgoing

открыты только порты:

22 (SSH)

80 (HTTP)

443 (HTTPS)

HTTPS

используется Let’s Encrypt

включено авто-продление сертификатов

настроены security headers (HSTS, XFO, XCTO и т.д.)

10) Запуск приложения и процесс деплоя

Приложение работает через PM2:

конфиг: ecosystem.config.cjs

процесс: arefevpro

используется production build Next.js

Деплой автоматизирован через GitHub Actions:

подключение по SSH через appleboy/ssh-action

секреты:

VPS_HOST

VPS_USER

VPS_SSH_KEY
VPS_SSH_KEY
