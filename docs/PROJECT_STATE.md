üìò –ö–æ–Ω—Å–ø–µ–∫—Ç –ø—Ä–æ–µ–∫—Ç–∞ arefev.pro
üß± –¢–µ–∫—É—â–∏–π —Å—Ç–µ–∫

Next.js 16 (App Router)

TypeScript

Tailwind CSS

Prisma ORM

PostgreSQL

JWT (httpOnly cookies)

PM2

GitHub Actions (CI/CD, deploy –ø–æ SSH)

‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ
üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è / –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

JWT —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ httpOnly cookie

/api/me –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

useAuth() ‚Äî –µ–¥–∏–Ω—ã–π —Ö—É–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

Navbar / Sidebar:

–ì–æ—Å—Ç—å ‚Üí Login / Register

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Logout

Logout —á–µ—Ä–µ–∑ POST /api/auth/logout

–ê–¥–º–∏–Ω –ª–æ–≥–∏–Ω–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ (–∑–∞—â–∏—Ç–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º)

üìù –ë–ª–æ–≥

–ü–æ—Å—Ç—ã —Å slug

–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–æ–≤

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—Å—Ç–∞ /blog/[slug]

–ü–æ–¥—Å—á—ë—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (Visitor / Visit)

üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç–∞–º

–í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–æ—Ç–≤–µ—Ç—ã)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:

–Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

–æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

—É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

‚ù§Ô∏è –õ–∞–π–∫–∏

–õ–∞–π–∫–∏ –ø–æ—Å—Ç–æ–≤

–õ–∞–π–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å: 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = 1 –ª–∞–π–∫

üß¨ Prisma (–æ—á–µ–Ω—å –≤–∞–∂–Ω–æ)

–ú–æ–¥–µ–ª–∏:

User

Post

Comment (—Å parentId ‚Äî threaded)

Like

CommentLike

Visitor

Visit

–°–¥–µ–ª–∞–Ω baseline migration

Production –ë–î —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑:

npx prisma migrate resolve --applied <baseline>


prisma/migrations –ù–ï –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –∏ –∫–æ–º–º–∏—Ç—è—Ç—Å—è

migrate dev ‚Äî —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ

migrate deploy ‚Äî —Ç–æ–ª—å–∫–æ –Ω–∞ –ø—Ä–æ–¥–µ

üöÄ –î–µ–ø–ª–æ–π

GitHub Actions:

push –≤ main ‚Üí –¥–µ–ø–ª–æ–π

SSH –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ appleboy/ssh-action

–°–µ—Ä–≤–µ—Ä:

Ubuntu

PM2

Workflow:

git pull

npm install

npx prisma migrate deploy

npx prisma generate

npm run build

pm2 restart arefev

üìÅ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–í–µ—Ç–∫–∏:

main ‚Äî –ø—Ä–æ–¥

feature/auth-users ‚Äî —Ñ–∏—á–∏

–ò—Å—Ç–æ—Ä–∏—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ –≤ –ø–æ—Ä—è–¥–æ–∫ (rebase)

.gitignore –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (Prisma migrations —Ä–∞–∑—Ä–µ—à–µ–Ω—ã)

üß† –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ –±—É–¥—É—â–µ–µ
Prisma

‚ùå –ù–ï –¥–µ–ª–∞—Ç—å migrate dev –Ω–∞ –ø—Ä–æ–¥–µ

‚ùå –ù–ï —É–¥–∞–ª—è—Ç—å migrations –Ω–∞ –ø—Ä–æ–¥–µ

‚úÖ –ï—Å–ª–∏ –ë–î —É–∂–µ –µ—Å—Ç—å ‚Üí migrate resolve

‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã ‚Üí –∫–æ–º–º–∏—Ç–∏—Ç—å migrations

Git

–§–∏—á–∏ ‚Üí –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞

–í main ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ PR –∏–ª–∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–π push

–ï—Å–ª–∏ push rejected ‚Üí git pull --rebase

üîú –ß—Ç–æ –ª–æ–≥–∏—á–Ω–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–±–ª–∏–∂–∞–π—à–µ–µ)

–£–ª—É—á—à–∏—Ç—å UI –ª–∞–π–∫–æ–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

–°—á—ë—Ç—á–∏–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ Prisma (select / include)

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2

Soft-delete –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

–ú–æ–¥–µ—Ä–∞—Ü–∏—è (admin)

–ü–∞–≥–∏–Ω–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–æ–≤

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)

SEO –¥–ª—è –±–ª–æ–≥–∞

–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (ISR / revalidate)